generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

enum UserType {
  admin
  teacher
  student
}

enum CourseRole {
  teacher
  student
}

model User {
  id          Int             @id @default(autoincrement())
  username    String          @unique
  email       String          @unique
  password    String
  type        UserType
  pronouns    String?
  first_name  String?
  last_name   String?
  description String?
  photo_url   String?
  link        String?
  team        String?

  courses     Subscription[]
}

model Course {
  id             Int             @id @default(autoincrement())
  title          String
  description    String?
  start_date     DateTime?
  end_date       DateTime?
  syllabus_url   String?
  subscription_url String?

  users          Subscription[]
}

model Subscription {
  user_id   Int
  course_id Int
  role      CourseRole

  user   User   @relation(fields: [user_id], references: [id], onDelete: Cascade)
  course Course @relation(fields: [course_id], references: [id], onDelete: Cascade)

  @@id([user_id, course_id])
}